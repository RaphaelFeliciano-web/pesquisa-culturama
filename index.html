<!DOCTYPE html>
<html lang="pt-BR">
<head>

	
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Formulário de Pesquisa Culturama</title>

</head>
<body>
	<form id="form-pesquisa">
		<h1>Formulário de Pesquisa</h1>

		<div>
			<label for="userName">Nome:</label>
			<input type="text" id="userName" name="userName" required>
		</div>

		<div>
			<label for="age">Idade:</label>
			<input type="number" id="age" name="age" required>
		</div>

		<div id="sexo">
			<label>Sexo:</label>
			<div class="radio-group">
				<div>
					<input type="radio" id="masculino" name="sexo" value="M" required>
					<label for="masculino" style="font-weight: normal;">Masculino</label>
				</div>
				<div>
					<input type="radio" id="feminino" name="sexo" value="F" required>
					<label for="feminino" style="font-weight: normal;">Feminino</label>
				</div>
				<div>
					<input type="radio" id="outro" name="sexo" value="O" required>
					<label for="outro" style="font-weight: normal;">Outro</label>
				</div>
			</div>
			<input type="text" id="outroSexo" name="outroSexo" style="display: none;" placeholder="Especifique">
		</div>

		<fieldset>
			<legend>Qual é o seu principal interesse cultural?</legend>
			<div class="checkbox-group">
				
				<div>
					<input type="checkbox" id="leitura" name="interesse" value="Leitura">
					<label for="leitura" style="font-weight: normal;">Leitura</label>
				</div>
				<div>
					<input type="checkbox" id="escrita" name="interesse" value="Escrita">
					<label for="escrita" style="font-weight: normal;">Escrita</label>
				</div>
				<div>
					<input type="checkbox" id="producao" name="interesse" value="Produção independente">
					<label for="producao" style="font-weight: normal;">Produção independente</label>
				</div>
				<div>
					<input type="checkbox" id="vivendo" name="interesse" value="Vivendo e aprendendo">
					<label for="vivendo" style="font-weight: normal;">Vivendo e aprendendo</label>
				</div>
			</div>
		</fieldset>

		<div>
			<label for="sugestoes">Sugestões para melhorar a Culturama:</label>
			<textarea id="sugestoes" name="sugestoes" rows="4" cols="50"></textarea>
		</div>

		<div>
			<label for="estado">Estado:</label>
			<select id="estado" name="estado" required>
				<option value="" disabled selected>Selecione o Estado</option>
				<option value="Alagoas - AL">Alagoas - AL</option>
				<option value="Amapá - AP">Amapá - AP</option>
				<option value="Acre - AC">Acre - AC</option>
				<option value="Amazonas - AM">Amazonas - AM</option>
				<option value="Bahia - BA">Bahia - BA</option>
				<option value="Ceará - CE">Ceará - CE</option>
				<option value="Distrito Federal - DF">Distrito Federal - DF</option>
				<option value="Espírito Santo - ES">Espírito Santo - ES</option>
				<option value="Goiás - GO">Goiás - GO</option>
				<option value="Maranhão - MA">Maranhão - MA</option>
				<option value="Mato Grosso - MT">Mato Grosso - MT</option>
				<option value="Mato Grosso do Sul - MS">Mato Grosso do Sul - MS</option>
				<option value="Minas Gerais - MG">Minas Gerais - MG</option>
				<option value="Pará - PA">Pará - PA</option>
				<option value="Paraíba - PB">Paraíba - PB</option>
				<option value="Paraná - PR">Paraná - PR</option>
				<option value="Pernambuco - PE">Pernambuco - PE</option>
				<option value="Piauí - PI">Piauí - PI</option>
				<option value="Rio de Janeiro - RJ">Rio de Janeiro - RJ</option>
				<option value="Rio Grande do Norte - RN">Rio Grande do Norte - RN</option>
				<option value="Rio Grande do Sul - RS">Rio Grande do Sul - RS</option>
				<option value="Rondônia - RO">Rondônia - RO</option>
				<option value="Roraima - RR">Roraima - RR</option>
				<option value="Santa Catarina - SC">Santa Catarina - SC</option>
				<option value="São Paulo - SP">São Paulo - SP</option>
				<option value="Sergipe - SE">Sergipe - SE</option>
				<option value="Tocantins - TO">Tocantins - TO</option>
			</select>		</div>

		<input type="submit" value="Enviar">
	</form>

	<!-- O React vai renderizar os cards aqui -->
	<div id="root"></div>
	<script type="module" src="./src/javascript/main.jsx"></script>

	<!-- Script Vanilla JS para controlar o formulário e enviar dados ao React -->
	<script>
		// 1. Lógica visual do campo "Outro"
		const radiosSexo = document.querySelectorAll('input[name="sexo"]');
		const inputOutro = document.getElementById('outroSexo');

		radiosSexo.forEach(radio => {
			radio.addEventListener('change', (e) => {
				if (e.target.value === 'O') {
					inputOutro.style.display = 'inline-block';
					inputOutro.style.marginTop = '1rem';
				} else {
					inputOutro.style.display = 'none';
				}
			});
		});

		// 2. Lógica de envio do formulário
		const form = document.getElementById('form-pesquisa');
		form.addEventListener('submit', (e) => {
			e.preventDefault();
			const formData = new FormData(form);

			const novoDado = {
				id: Date.now(), // Adiciona um ID único baseado no tempo
				userName: formData.get('userName'),
				age: formData.get('age'),
				sexo: formData.get('sexo'),
				outroSexo: formData.get('outroSexo'),
				interesse: formData.getAll('interesse'),
				sugestoes: formData.get('sugestoes'),
				estado: formData.get('estado')
			};

			// Dispara um evento customizado que o React está escutando
			const evento = new CustomEvent('add-response', { detail: novoDado });
			window.dispatchEvent(evento);

			form.reset();
			inputOutro.style.display = 'none';
			alert('Obrigado! Sua pesquisa foi registrada.');
		});
	</script>
</body>
</html>
